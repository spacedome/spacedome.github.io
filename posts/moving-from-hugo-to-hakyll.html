<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Moving from Hugo to Hakyll</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Rewriting my website in Hakyll">
    
    <meta name="author" content="Julien">
    
    
    <meta name="keywords" content="announcement, haskell, blog">
    

    <meta property="og:site_name" content="Spacedome">
    <meta property="og:title" content="Moving from Hugo to Hakyll">
    <meta property="og:url" content="https://spacedome.tv/posts/moving-from-hugo-to-hakyll.html">
    <meta property="og:description" content="Rewriting my website in Hakyll">
    
    
    <meta property="og:type" content="article">
    

    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="canonical" href="https://spacedome.tv/posts/moving-from-hugo-to-hakyll.html">

    <link rel="alternate" href="../atom.xml" title="Spacedome.tv" type="application/atom+xml">
    <link rel="alternate" href="../rss.xml" title="Spacedome.tv" type="application/rss+xml">

    <link rel="stylesheet" href="../css/code.css" />
    <link rel="stylesheet" href="../css/default.css" />

    
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/mml-chtml.min.js">
    </script>
    
  </head>
  <header>
      <a href="../">
          <img src="../images/spacedome.svg" alt="spacedome.tv" class="logo">
      </a>
  </header>
  <nav>
      <ul class="bar">
          <li><a href="../posts.html">Posts</a></li>
          <li><a href="../projects.html">Projects</a></li>
          <li><a href="../research.html">Research</a></li>
          <li><a href="../artwork.html">Artwork</a></li>
          <li><a href="https://github.com/spacedome">Github</a></li>
          <li><a href="../">About</a></li>
      </ul>
  </nav>
  <body>
    <main>
  <article>
    <header>
    <h1>Moving from Hugo to Hakyll</h1>
    <p><i>2024-11-09 (updated: 2024-11-09 10:59)</i></p>
    <hr />
    </header>
    <section>
      <p>Five years ago I decided to rewrite this website with a static site generator, and chose Hugo on a whim.
After letting it sit around unused for far too long, I moved it to <a href="https://jaspervdj.be/hakyll/">Hakyll</a>.
Now that I’m getting back into Haskell, it was a perfect small project, and Pandoc is unbeatable as a document conversion backend.</p>
<p>The built in code highlighter works well enough if you override some of the styling.
It is aparently also possible to use pygmentize if you want to go through the trouble.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ot">toSlug ::</span> <span class="dt">T.Text</span> <span class="ot">-&gt;</span> <span class="dt">T.Text</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>toSlug <span class="ot">=</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  T.intercalate (T.singleton <span class="ch">'-'</span>) <span class="op">.</span> T.words <span class="op">.</span> T.toLower <span class="op">.</span> clean</span></code></pre></div>
<p>I chose a perfect time to move, as MathML finally has full support across all browsers as of Chromium 109, so the whole MathJax/KaTeX and JS rendering question is finally over.
We are free!
Here is an example and the associated markdown:</p>
<p>Inline math with MathML: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mi>m</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">y = mx +b</annotation></semantics></math>.
Block/display style:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>ln</mo><mi>x</mi><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi>∞</mi></mrow><mi>x</mi></msubsup><mfrac><mn>1</mn><mi>y</mi></mfrac><mspace width="0.167em"></mspace><mstyle mathvariant="normal"><mi>d</mi></mstyle><mi>y</mi><mi>.</mi></mrow><annotation encoding="application/x-tex"> \ln x = \int_{-\infty}^x \frac 1 y \, \mathrm{d}y . </annotation></semantics></math></p>
<pre class="text"><code>Inline math with MathML: \\( y = mx +b \\). Block/display style:
\\[ \ln x = \int_{-\infty}^x \frac 1 y \, \mathrm{d}y . \\]</code></pre>
<p>This is as easy as enabling the <code>Ext_tex_math_double_backslash</code> Pandoc extension and setting <code>writerHTMLMathMethod = MathML</code> in the Pandoc writer options.
It is significantly uglier than what TeX would give you, but this is the price you pay if you want to avoid javascript or prerendering SVGs.</p>
<p>If you do want your math to look nice, instead of using the MathJax Pandoc writer, you can use MathML and put the MathJax CDN script in your header for drop in MathJax rendering that falls back gracefully to MathML instead of the typical raw LaTeX text.
Why this isn’t the default behavior of the MathJax writer in Pandoc, who knows.
You can also pre-render with KaTeX to get pretty HTML results, but this involves running javascript during the build process.</p>
<p>To see what this page looks like redered as pure MathML, just disable javascript.
Thankfully, while still a real Hog coming in around 250kB compressed, MathJax 3 is much faster than it used to be.
Definitely make sure to have this included only on the necessary pages.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow><mo stretchy="true" form="prefix">(</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>a</mi><mi>k</mi></msub><msub><mi>b</mi><mi>k</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>≤</mo><mrow><mo stretchy="true" form="prefix">(</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msubsup><mi>a</mi><mi>k</mi><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msubsup><mi>b</mi><mi>k</mi><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\left( \sum_{k=1}^n a_k b_k \right)^2 \leq \left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right) </annotation></semantics></math></p>
    </section>
  </article>
</main>

    <script defer src="../js/script.js"></script>
  </body>
  <footer>
  <div>
      <p>
      Generated with Hakyll &copy 2024
      </p>
  </div>
  </footer>
</html>
